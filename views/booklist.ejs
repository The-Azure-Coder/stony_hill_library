<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/styles/booklist.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.4.17/sweetalert2.min.js" integrity="sha512-Kyb4n9EVHqUml4QZsvtNk6NDNGO3+Ta1757DSJqpxe7uJlHX1dgpQ6Sk77OGoYA4zl7QXcOK1AlWf8P61lSLfQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.4.17/sweetalert2.min.css" integrity="sha512-CJ5goVzT/8VLx0FE2KJwDxA7C6gVMkIGKDx31a84D7P4V3lOVJlGUhC2mEqmMHOFotYv4O0nqAOD0sEzsaLMBg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

   
  
</head>

<body>
    <section>
        <div class="background">
            <h1>Library's Booklist </h1>
            <p>Choose a book now</p>
        </div>
    </section>


    <div class="search">
        <form action="/booklist/category" method="post">
           
            <select name="category" id="">
                <option value="">all</option>
                <option value="Medical">Medical</option>
                <option value="Law">Law</option>
                <option value="Business">Business</option>
            </select>
           <button type="submit"><i class="fas fa-search"></i></button>
       </form>
    </div>
    <% if(messages.error){ %>
        <script>
          Swal.fire({
  icon: 'error',
  title: 'Sorry...',
  text: 'There is no more of this book available!',
  footer: '<a href="">Why do I have this issue?</a>'
})
        </script>
   <% } else if(messages.success){ %>
    <script>
        Swal.fire({
  position: 'top-end',
  icon: 'success',
  title: 'Book as been Borrowed',
  showConfirmButton: false,
  timer: 1500
})
    </script>
  <% }%>


  <% if(messages.error2){ %>
    <script>
      Swal.fire({
icon: 'error',
title: 'Sorry!...',
text: 'You have exceeded your borrow limit of two',
footer: '<a href="/booklist">Back to booklist </a>'
})
    </script>
<% } else if(messages.success){ %>
<script>
    Swal.fire({
position: 'top-end',
icon: 'success',
title: 'Book as been Borrowed',
showConfirmButton: false,
timer: 1500
})
</script>
<% }%>
    <div class="container">
        <% books.forEach((book)=>{ %> 
       <div class="card"> 
          <div class="image">
            <img src="<%=book.image%>" alt="">
          </div>
        <div class="content">
            <h1><%=book.title%></h1>
            <p><%=book.book_description%></p>
            <h4>By: <%=book.author%></h4>
            <a href="/booklist/borrow/<%=book.id%>">Borrow Now</a>
        </div>
     </div>
     <%}) %>   
  </div>
  
</body>
</html>